# Серверная часть приложения для видеоконференций

Данный проект представляет собой WebSocket-сервер для организации peer-to-peer видеоконференций. Сервер выполняет функции сигнального сервера: управляет комнатами, распределяет идентификаторы клиентов, пересылает SDP-офферы, ответы и ICE-кандидаты между участниками одной комнаты.

## Описание

Сервер предоставляет следующие ключевые возможности:

1. **Управление комнатами**  
   - При подключении клиент указывает `room` (ID комнаты) в query-параметре URL.  
   - Если комната с таким идентификатором не существует — создаётся новая.  
   - В противном случае — клиент добавляется в уже существующую комнату.

2. **Распределение уникальных идентификаторов клиентов**  
   - При каждом подключении сервер генерирует случайный ID вида `user-xxxxxxxx` (8 шестнадцатеричных символов).  
   - Этот ID отправляется клиенту сразу после установки WebSocket-соединения.

3. **Сигнальный обмен (WebRTC Signaling)**  
   - Клиенты пересылают друг другу сообщения типов: `offer`, `answer`, `ice-candidate`.  
   - Сервер получает таких сообщения и пересылает их напрямую указанному получателю внутри одной комнаты.
   - При выходе пользователя из комнаты остальные клиенты уведомляются типом `user-left`.  
   - При входе нового пользователя в комнату остальные получают тип `user-joined`.


### Технические требования

- Go 1.21 или выше
- Docker (для контейнеризации)

## Установка и запуск

### Локальный запуск

1. Установите зависимости:
```bash
go mod download
```

2. Запустите сервер:
```bash
go run main.go
```

По умолчанию сервер запускается на порту 8080.

### Запуск через Docker

1. Соберите Docker образ:
```bash
docker build -t rksp-video-conference-backend .
```

2. Запустите контейнер:
```bash
docker run -d -p 8080:8080 rksp-video-conference-backend
```

### Переменные окружения

- `PORT`: Порт для запуска сервера (по умолчанию: 8080)
- `ALLOWED_ORIGINS`: Разрешенные источники для CORS (разделяются запятыми)
